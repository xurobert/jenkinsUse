# 人员入转调离大数据适配测试用例

## 文档信息

| 版本 | 修订日期 | 修订人 | 修订内容 |
|-----|---------|--------|----------|
| V1.0 | 2024-03-21 | 测试组 | 初始版本 |

## 目录
1. [人员状态基础测试](#1-人员状态基础测试)
2. [指标统计测试](#2-指标统计测试)
3. [报表功能测试](#3-报表功能测试)
4. [关联指标测试](#4-关联指标测试)
5. [权限控制测试](#5-权限控制测试)
6. [性能测试](#6-性能测试)

## 1. 人员状态基础测试

### 1.1 人员状态流转测试

#### TC1.1.1 验证人员状态完整流程

**优先级:** P0

**前置条件:**
- 测试环境中存在完整的项目和组织架构
- 有权限进行人员管理的测试账号
- 测试项目已完成基础配置

**测试步骤:**
1. 邀请新工人加入项目,检查初始态为"入场中"
   - 进入人员管理页面
   - 点击"添加工人"
   - 填写工人基本信息并提交
   - 检查工人状态
2. 完成审核流程,检查状态变更为"已入场" 
   - 进入审核页面
   - 完成所有审核步骤
   - 检查工人状态变更
3. 发起离场,检查状态变更为"离场"
   - 选择目标工人
   - 点击"离场"操作
   - 填写离场原因
   - 提交离场申请
   - 检查状态变更
4. 发起退场,检查状态变更为"退场"
   - 选择目标工人
   - 点击"退场"操作
   - 填写退场原因
   - 提交退场申请
   - 检查状态变更

**预期结果:**
- 状态流转正确且有相应时间记录
- 各状态对应的权限控制正确
- 每次状态变更都有操作记录
- 状态变更时间准确记录

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 需要验证每个状态变更的时间戳记录
- 需要检查操作日志完整性

#### TC1.1.2 验证异常流程处理

**优先级:** P1

**前置条件:**
- 测试环境中存在不同状态的测试人员
- 测试账号具有人员管理权限

**测试步骤:**
1. 尝试将"入场中"状态直接变更为"退场"
   - 选择"入场中"状态的工人
   - 尝试直接发起退场操作
   - 记录系统响应
2. 尝试将"已入场"状态直接变更为"入场中"
   - 选择"已入场"状态的工人
   - 尝试修改状态为"入场中"
   - 记录系统响应
3. 尝试将"退场"状态直接变更为"离场"
   - 选择"退场"状态的工人
   - 尝试发起离场操作
   - 记录系统响应

**预期结果:**
- 系统阻止非法的状态流转
- 给出适当的错误提示
- 错误日志正确记录
- 原状态保持不变

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 需要记录所有错误提示信息
- 验证状态未被非法修改

## 2. 指标统计测试

### 2.1 未审核工人数

#### TC2.1.1 基础统计验证

**优先级:** P0

**前置条件:**
- 项目中存在多个不同状态的工人
- 包含以下状态的工人:
  - 入场中
  - 已入场
  - 离场
  - 退场

**测试步骤:**
1. 统计状态为"入场中"的工人数量
   - 进入数据统计页面
   - 查看未审核工人数指标
   - 记录显示数值
2. 验证其他状态工人未被计入
   - 手动统计各状态工人数
   - 与系统显示数据对比
   - 确认统计口径

**预期结果:**
- 未审核工人数仅包含"入场中"状态的工人
- 数据与实际人数一致
- 实时统计准确
- 历史数据准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 需要验证数据实时性
- 需要验证历史数据准确性

#### TC2.1.2 实时性验证

**优先级:** P1

**前置条件:**
- 测试环境正常运行
- 具有添加和审核工人的权限

**测试步骤:**
1. 新增一个"入场中"状态工人
   - 添加新工人
   - 记录添加前后未审核工人数
   - 验证数据变化
2. 检查未审核工人数是否实时增加
   - 观察统计数据变化
   - 记录更新时间
3. 将一个"入场中"工人审核通过
   - 完成审核流程
   - 记录审核前后未审核工人数
   - 验证数据变化
4. 检查未审核工人数是否实时减少
   - 观察统计数据变化
   - 记录更新时间

**预期结果:**
- 指标数据实时更新
- 增减数量准确
- 更新时间符合要求
- 数据一致性正确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 记录数据更新延迟时间
- 验证多端数据一致性

### 2.2 入场工人数

#### TC2.2.1 周期统计验证

**优先级:** P0

**前置条件:**
- 设置统计周期为本月
- 存在跨月份的工人数据

**测试步骤:**
1. 统计周期内新变更为"已入场"状态的工人
   - 查看本月入场统计数据
   - 记录具体数值
2. 验证上月入场的工人未被计入
   - 检查上月入场工人是否被排除
   - 记录验证结果
3. 验证本月重复入场的工人只计算一次
   - 选择一个本月入场工人
   - 模拟重复入场场景
   - 检查统计结果

**预期结果:**
- 入场工人数仅统计周期内首次入场的工人
- 重复入场不重复计算
- 跨月份数据正确区分
- 统计口径准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 需要特别关注月初月末的边界数据
- 验证跨月份数据的准确性

#### TC2.2.2 历史累计验证

**优先级:** P1

**前置条件:**
- 存在历史数据
- 统计周期设置为"历史累计"

**测试步骤:**
1. 查看历史累计入场工人数
   - 进入统计页面
   - 切换至历史累计视图
   - 记录显示数值
2. 验证历史数据完整性
   - 手动统计历史所有入场工人
   - 对比系统显示数据
3. 添加新工人并验证更新
   - 新增工人并完成入场
   - 检查历史累计数据变化

**预期结果:**
- 历史累计数据准确完整
- 新增数据及时更新
- 不同时间段的数据正确汇总

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 关注数据迁移的完整性
- 验证长期数据的准确性

### 2.3 在册工人数

#### TC2.3.1 多状态统计验证

**优先级:** P0

**前置条件:**
- 项目中存在不同状态的工人
- 统计周期为当前月份

**测试步骤:**
1. 统计当前"已入场"状态工人
   - 查看已入场工人列表
   - 记录人数
2. 统计本月发生"离场"的工人
   - 查看离场记录
   - 统计本月离场人数
3. 统计本月发生"退场"的工人
   - 查看退场记录
   - 统计本月退场人数
4. 验证在册工人总数
   - 汇总以上三类人数
   - 对比系统显示的在册总数

**预期结果:**
- 在册工人数 = 已入场人数 + 本月离场人数 + 本月退场人数
- 统计不重复
- 数据实时准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证同一工人多次状态变更的统计逻辑
- 检查是否存在重复统计

#### TC2.3.2 时间边界验证

**优先级:** P1

**前置条件:**
- 测试环境时间可调整
- 存在跨月份数据

**测试步骤:**
1. 验证月初边界场景
   - 在月末23:59添加离场记录
   - 在次月00:01添加离场记录
   - 检查两条记录的统计归属
2. 验证月末边界场景
   - 在月末最后一天添加多条记录
   - 在次月第一天查看统计结果
3. 验证跨月数据处理
   - 模拟工人跨月离场场景
   - 检查不同月份的统计数据

**预期结果:**
- 边界时间点数据归属正确
- 跨月数据统计准确
- 月度汇总数据准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 重点关注23:59:59时间点的数据处理
- 验证跨月数据的统计规则

### 2.4 在册管理人员数

#### TC2.4.1 单位类型验证

**优先级:** P0

**前置条件:**
- 存在不同单位类型的管理人员数据
- 各类型单位都有在册人员

**测试步骤:**
1. 验证施工单位管理人员统计
   - 查看施工单位在册人数
   - 记录统计数据
2. 验证分包单位管理人员统计
   - 查看分包单位在册人数
   - 记录统计数据
3. 验证其他单位类型统计
   - 监理单位
   - 建设单位
   - 地勘单位
   - 设计单位
4. 验证管理人员总数
   - 汇总各类型单位人数
   - 对比系统总数

**预期结果:**
- 各类型单位人数统计准确
- 总数计算正确
- 单位类型划分清晰

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证单位类型是否完整
- 检查特殊单位类型的处理

## 3. 报表功能测试

### 3.1 数据筛选功能

#### TC3.1.1 当前在册筛选验证

**优先级:** P0

**前置条件:**
- 进入工人信息明细报表
- 存在各种状态的工人数据

**测试步骤:**
1. 验证"已入场"状态筛选
   - 启用当前在册筛选
   - 检查"已入场"工人是否全部显示
2. 验证今日"离场"状态筛选
   - 筛选今日离场的工人
   - 确认是否正确显示
3. 验证今日"退场"状态筛选
   - 筛选今日退场的工人
   - 确认是否正确显示
4. 验证历史记录筛选
   - 筛选非今日离场退场记录
   - 确认是否被正确过滤

**预期结果:**
- 当前在册工人显示完整
- 历史记录正确过滤
- 筛选条件组合准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证筛选条件的逻辑关系
- 检查数据显示的实时性

#### TC3.1.2 时间范围筛选验证

**优先级:** P1

**前置条件:**
- 存在跨越多个时间段的数据
- 报表支持时间范围筛选

**测试步骤:**
1. 验证日期选择功能
   - 选择具体日期范围
   - 检查数据筛选结果
2. 验证快捷时间选择
   - 今日
   - 本周
   - 本月
   - 本季度
   - 本年度
3. 验证自定义时间范围
   - 选择跨月时间段
   - 选择跨年时间段
   - 检查数据统计结果

**预期结果:**
- 时间筛选功能正常
- 数据统计准确
- 快捷选择功能可用

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证时间选择的灵活性
- 检查统计规则的一致性

### 3.2 数据展示功能

#### TC3.2.1 多端数据一致性验证

**优先级:** P0

**前置条件:**
- 所有测试端均可正常访问
- 测试账号具有所有端的访问权限

**测试步骤:**
1. PC端数据验证
   - 登录CMS管理后台
   - 记录关键指标数据
   - 登录OMS系统
   - 对比同期数据
2. 移动端数据验证
   - 登录管理APP
   - 记录关键指标数据
   - 登录移动OMS
   - 对比同期数据
3. 实时数据更新验证
   - 在任一端进行数据操作
   - 检查其他端数据更新情况
   - 记录数据同步时间

**预期结果:**
- 所有端口数据一致
- 数据更新及时同步
- 展示格式统一规范

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 记录数据同步延迟
- 验证数据展示格式

#### TC3.2.2 导出功能验证

**优先级:** P1

**前置条件:**
- 系统中存在足够的测试数据
- 具有数据导出权限

**测试步骤:**
1. 验证不同格式导出
   - 导出Excel格式
   - 导出CSV格式
   - 验证文件格式正确性
2. 验证大数据量导出
   - 选择1000+条记录导出
   - 验证导出过程和结果
3. 验证导出数据完整性
   - 对比页面显示数据
   - 检查导出文件数据
   - 验证字段完整性

**预期结果:**
- 支持多种导出格式
- 大数据量导出正常
- 导出数据完整准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 关注大数据量导出性能
- 验证导出文件的可用性

## 4. 关联指标测试

### 4.1 工人备案率

#### TC4.1.1 备案率计算验证

**优先级:** P0

**前置条件:**
- 存在已备案和未备案的工人
- 备案数据正常同步

**测试步骤:**
1. 基础备案率计算
   - 统计在册工人总数
   - 统计已备案工人数
   - 验证备案率计算结果
2. 特殊情况验证
   - 验证备案信息过期场景
   - 验证备案信息变更场景
3. 实时更新验证
   - 新增备案记录
   - 检查备案率变化

**预期结果:**
- 备案率计算准确
- 特殊情况处理正确
- 数据实时更新

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证备案率计算公式
- 检查数据更新及时性

#### TC4.1.2 备案状态变更验证

**优先级:** P1

**前置条件:**
- 具有备案管理权限
- 存在可操作的测试数据

**测试步骤:**
1. 新增备案记录
   - 选择未备案工人
   - 添加备案信息
   - 检查备案率变化
2. 备案信息失效
   - 使备案信息过期
   - 验证备案率调整
3. 批量备案操作
   - 选择多个工人
   - 进行批量备案
   - 检查备案率变化

**预期结果:**
- 备案状态变更正确
- 备案率实时更新
- 批量操作准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证备案信息有效期
- 检查批量操作效果

### 4.2 工人绑卡率

#### TC4.2.1 绑卡率计算验证

**优先级:** P0

**前置条件:**
- 存在已绑卡和未绑卡的工人
- 银行卡系统接口正常

**测试步骤:**
1. 基础绑卡率计算
   - 统计在册工人总数
   - 统计已绑卡工人数
   - 验证绑卡率计算结果
2. 特殊情况验证
   - 验证卡片注销场景
   - 验证卡片更换场景
3. 实时更新验证
   - 新增绑卡记录
   - 检查绑卡率变化

**预期结果:**
- 绑卡率计算准确
- 特殊情况处理正确
- 数据实时更新

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证绑卡率计算公式
- 检查数据更新及时性

#### TC4.2.2 绑卡操作验证

**优先级:** P1

**前置条件:**
- 具有绑卡操作权限
- 银行卡系统接口正常

**测试步骤:**
1. 新增绑卡
   - 选择未绑卡工人
   - 录入银行卡信息
   - 提交绑定申请
2. 解除绑定
   - 选择已绑卡工人
   - 执行解绑操作
   - 检查绑卡率变化
3. 批量绑卡
   - 选择多个工人
   - 进行批量绑卡
   - 验证操作结果

**预期结果:**
- 绑卡操作正常
- 解绑操作正确
- 批量操作准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证银行卡格式检查
- 测试批量操作性能

## 5. 权限控制测试

### 5.1 数据查看权限

#### TC5.1.1 角色权限验证

**优先级:** P0

**前置条件:**
- 系统中配置了不同角色
- 测试账号分配了对应角色

**测试步骤:**
1. 项目管理员权限验证
   - 使用项目管理员账号登录
   - 验证可查看的数据范围
   - 验证可操作的功能范围
2. 企业管理员权限验证
   - 使用企业管理员账号登录
   - 验证数据查看范围
   - 验证功能操作权限
3. 普通用户权限验证
   - 使用普通用户账号登录
   - 验证数据访问限制
   - 验证功能使用限制
4. 监理单位用户权限验证
   - 使用监理单位账号登录
   - 验证数据查看范围
   - 验证功能权限范围

**预期结果:**
- 各角色权限严格隔离
- 敏感数据访问受控
- 功能操作权限准确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证权限继承关系
- 检查权限变更生效

#### TC5.1.2 数据隔离验证

**优先级:** P0

**前置条件:**
- 存在多个测试项目
- 测试账号具有多项目权限

**测试步骤:**
1. 项目间数据隔离
   - 切换不同项目
   - 验证数据显示范围
   - 检查数据操作权限
2. 组织架构隔离
   - 验证不同组织层级
   - 检查数据访问范围
   - 验证跨组织操作限制
3. 单位类型隔离
   - 验证不同单位类型
   - 检查数据查看权限
   - 验证数据操作限制

**预期结果:**
- 项目数据严格隔离
- 组织架构权限准确
- 单位类型权限正确

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 验证数据越权访问
- 检查权限继承关系

## 6. 性能测试

### 6.1 数据加载性能

#### TC6.1.1 大数据量处理验证

**优先级:** P0

**前置条件:**
- 准备大量测试数据(1万+工人记录)
- 测试环境资源正常

**测试步骤:**
1. 列表加载性能
   - 加载1000条记录
   - 加载5000条记录
   - 加载10000条记录
   - 记录响应时间
2. 复杂查询性能
   - 多条件组合查询
   - 多字段排序
   - 记录查询耗时
3. 导出性能
   - 导出1000条记录
   - 导出5000条记录
   - 导出10000条记录
   - 记录导出耗时

**预期结果:**
- 列表加载时间 < 3秒
- 复杂查询响应 < 5秒
- 数据导出耗时可接受

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 记录各项操作耗时
- 监控系统资源占用

#### TC6.1.2 并发访问验证

**优先级:** P1

**前置条件:**
- 准备并发测试工具
- 测试环境支持并发访问

**测试步骤:**
1. 并发查询测试
   - 10个并发用户
   - 50个并发用户
   - 100个并发用户
   - 记录响应时间
2. 并发操作测试
   - 并发添加工人
   - 并发修改状态
   - 并发导出数据
   - 验证数据一致性
3. 长时间运行测试
   - 持续运行4小时
   - 监控系统性能
   - 验证数据准确性

**预期结果:**
- 系统响应时间稳定
- 数据处理准确无误
- 无内存泄漏问题

**实际结果:**
- [ ] Pass
- [ ] Fail

**备注:**
- 监控系统资源使用
- 记录性能瓶颈点

## 附录

### A. 测试环境信息

#### A.1 环境地址
- CMS管理后台: https://cms.test.example.com
- OMS系统: https://oms.test.example.com
- 管理APP: v1.0.0
- 移动OMS: v1.0.0

#### A.2 测试账号
| 角色 | 账号 | 密码 | 备注 |
|-----|------|------|------|
| 项目管理员 | admin | ****** | 全部权限 |
| 企业管理员 | enterprise | ****** | 企业级权限 |
| 普通用户 | user | ****** | 基础权限 |
| 监理单位 | supervisor | ****** | 监理权限 |

#### A.3 测试数据准备
1. 基础数据
   - 项目信息
   - 组织架构
   - 单位信息
2. 工人数据
   - 不同状态工人
   - 历史记录数据
   - 关联信息数据

### B. 缺陷等级定义

| 等级 | 说明 | 示例 |
|-----|------|------|
| P0 | 阻塞性问题,影响核心功能 | 系统无法登录、数据丢失 |
| P1 | 重要功能问题,影响使用 | 状态流转错误、统计不准 |
| P2 | 次要功能问题,有替代方案 | 展示格式异常、提示不准确 |
| P3 | 体验类问题,不影响功能 | 样式不美观、操作不便捷 |

### C. 测试结果汇总

| 模块 | 用例数 | 通过数 | 失败数 | 未测数 | 通过率 |
|-----|--------|--------|--------|--------|--------|
| 人员状态基础测试 | 2 | 0 | 0 | 2 | 0% |
| 指标统计测试 | 6 | 0 | 0 | 6 | 0% |
| 报表功能测试 | 4 | 0 | 0 | 4 | 0% |
| 关联指标测试 | 4 | 0 | 0 | 4 | 0% |
| 权限控制测试 | 2 | 0 | 0 | 2 | 0% |
| 性能测试 | 2 | 0 | 0 | 2 | 0% |
| 合计 | 20 | 0 | 0 | 20 | 0% |

### D. 问题汇总

| 问题ID | 问题描述 | 严重程度 | 状态 | 备注 |
|--------|----------|----------|------|------|
| BUG-001 | | | | |
| BUG-002 | | | | |
| BUG-003 | | | | |

### E. 测试建议

1. 数据准确性
   - 加强状态流转的数据校验
   - 完善统计规则的边界处理
   - 优化数据同步机制

2. 性能优化
   - 优化大数据量查询性能
   - 改进导出功能的处理方式
   - 加强并发访问的稳定性

3. 用户体验
   - 优化操作流程的便捷性
   - 完善错误提示的准确性
   - 提升数据展示的直观性

4. 测试覆盖
   - 补充更多边界场景测试
   - 加强异常流程的测试
   - 完善自动化测试用例

</rewritten_file> 